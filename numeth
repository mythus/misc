#!/usr/bin/env bash
# arrange by PCI address , sord and numerate udev rules for net

tmpF=$(mktemp)
awk '/PCI/ {printf $0" nnn "; getline; print $0 }' < $1 |
sort |
while read i 
	do 
	((j++))
 	echo $i | sed -e s/NAME\=\"eth.*\"/NAME\=\"eth$((j-1))\"/
	done |
sed -e 's/ nnn /\n/' > $tmpF
sed -ie 's/^/#/' $1
cat >> $1 <<EOC

#############################################################
### This is generated by numeth.sh 
### Just reorder the ports 
### by their PCI address so they are in sequence by card
#############################################################
EOC
cat $tmpF >> $1
